<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Discord ID Bilgi</title>
  <style>
    body { font-family: sans-serif; max-width: 600px; margin: 2rem auto; }
    input, button { padding: 8px; margin-top: 10px; }
  </style>
</head>
<body>
  <h2>Discord ID'den Bilgi Al</h2>
  <input type="text" id="discordId" placeholder="Discord kullanıcı ID'si girin">
  <button onclick="goster()">Göster</button>

  <div id="sonuc" style="margin-top: 20px;"></div>

  <script>
    function snowflakeToDate(id) {
      const discordEpoch = 1420070400000;
      const timestamp = BigInt(id) >> 22n;
      return new Date(Number(timestamp) + discordEpoch);
    }

    async function goster() {
      const id = document.getElementById("discordId").value;
      if (!/^\d{17,20}$/.test(id)) {
        alert("Geçerli bir Discord ID girin.");
        return;
      }

      const olusTarihi = snowflakeToDate(id);

      const userInfo = await fetch(`https://discord.com/api/v10/users/${id}`, {
        headers: {
          "Authorization": "Bot BOT_TOKEN_BURAYA" // ❗ Zorunlu: bu istek yetki ister
        }
      }).then(r => r.ok ? r.json() : null);

      let sonucHtml = `<p><strong>ID:</strong> ${id}</p>`;
      sonucHtml += `<p><strong>Hesap Oluşturulma:</strong> ${olusTarihi.toLocaleString()}</p>`;

      if (userInfo) {
        sonucHtml += `<p><strong>Kullanıcı Adı:</strong> ${userInfo.username}#${userInfo.discriminator}</p>`;
        if (userInfo.avatar) {
          const avatarUrl = `https://cdn.discordapp.com/avatars/${id}/${userInfo.avatar}.png`;
          sonucHtml += `<img src="${avatarUrl}" width="128">`;
        }
      } else {
        sonucHtml += `<p><em>Diğer kullanıcı bilgileri sadece yetkili API ile çekilebilir.</em></p>`;
      }

      document.getElementById("sonuc").innerHTML = sonucHtml;
    }
  </script>
</body>
</html>
